# -SNAPSHOT versions aren't automatically reloaded, need to update the project version to see the difference

@file:Repository("http://maven.huygens.knaw.nl/repository/")
@file:DependsOn("nl.knaw.huygens:hyper-collate-core:1.3.3-SNAPSHOT")
@file:DependsOn("nl.knaw.huygens:hyper-collate-rest:1.3.3-SNAPSHOT")
@file:DependsOn("nl.knaw.huygens:hyper-collate-jupyter:1.3.3-SNAPSHOT")

import nl.knaw.huygens.hypercollate.jupyter.*
import nl.knaw.huygens.hypercollate.rest.DotEngine
import nl.knaw.huygens.hypercollate.model.*

HC.init()
val dotEngine = DotEngine("/usr/bin/dot")
fun VariantWitnessGraph.asSvg(): MimeTypedResult = MIME(this.asSVGPair(dotEngine,colored=true,join=true))
fun VariantWitnessGraph.asPng(): MimeTypedResult = MIME(this.asSVGPair(dotEngine,colored=true,join=true))
fun CollationGraph.asHtml(): MimeTypedResult = HTML(this.asHTMLString())
fun CollationGraph.asSvg(): MimeTypedResult = MIME(this.asSVGPair(dotEngine,colored=true,join=true))
fun CollationGraph.asPng(): MimeTypedResult = MIME(this.asPNGPair(dotEngine,colored=true,join=true))

val wF = HC.importVariantWitnessGraphFromXML("A",
        "<text>The dog's big eyes.</text>")
val wQ = HC.importVariantWitnessGraphFromXML("B",
        "<text>The dog's <del>big black ears</del><add>brown eyes</add>.</text>")

wF.asSvg()
wQ.asPng()

val collationGraph = HC.collate(wF, wQ)

collationGraph.asASCIITable(true)

collationGraph.asHtml()

collationGraph.asSvg()

collationGraph.asPng()




